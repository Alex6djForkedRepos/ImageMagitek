<UserControl
    x:Class="TileShop.WPF.Views.MenuView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:event="clr-namespace:TileShop.Shared.EventModels;assembly=TileShop.Shared"
    xmlns:local="clr-namespace:TileShop.WPF.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:s="https://github.com/canton7/Stylet"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>
        <Menu>
            <MenuItem Header="_File">
                <MenuItem Click="{s:Action NewProject}" Header="_New Project" />
                <MenuItem Click="{s:Action OpenProject}" Header="Open _Project" />
                <Separator />
                <MenuItem
                    Click="{s:Action CloseEditor}"
                    Header="{Binding Editors.ActiveEditor.DisplayName}"
                    HeaderStringFormat="Close \'{0}\'"
                    Visibility="{Binding Editors.ActiveEditor, Converter={StaticResource NullToVisibilityConverter}}" />

                <!--  InputGestureText="Ctrl+X"  -->

                <MenuItem
                    Click="{s:Action CloseAllProjects}"
                    Header="_Close All Projects"
                    IsEnabled="{Binding ProjectTree.HasProject}" />
                <Separator />

                <MenuItem
                    Click="{s:Action SaveAll}"
                    Header="Save All"
                    IsEnabled="{Binding ProjectTree.HasProject}" />

                <MenuItem
                    Click="{s:Action SaveEditor}"
                    Header="{Binding Editors.ActiveEditor.DisplayName}"
                    HeaderStringFormat="Save \'{0}\'"
                    IsEnabled="{Binding Editors.ActiveEditor.IsModified}"
                    Visibility="{Binding Editors.ActiveEditor, Converter={StaticResource NullToVisibilityConverter}}" />

                <Separator />
                <MenuItem Click="{s:Action ExitApplication}" Header="E_xit" />
            </MenuItem>


            <MenuItem Header="_View">
                <MenuItem
                    Command="{s:Action ShowWindow}"
                    CommandParameter="{x:Static event:ToolWindow.PixelEditor}"
                    Header="Pixel Editor" />
                <MenuItem
                    Command="{s:Action ShowWindow}"
                    CommandParameter="{x:Static event:ToolWindow.ProjectExplorer}"
                    Header="Project Explorer" />
            </MenuItem>


            <!--
            <MenuItem Header="_Project" IsEnabled="{Binding HasProject}">
                <MenuItem
                    Click="{s:Action AddDataFile}"
                    Header="Add Existing Data File..."
                    IsEnabled="{Binding ProjectTree.HasProject}" />
                <MenuItem
                    Click="{s:Action AddScatteredArranger}"
                    Header="Add New Scattered Arranger Definition..."
                    IsEnabled="{Binding ProjectTree.HasProject}" />
                <MenuItem
                    Click="{s:Action AddPalette}"
                    Header="Add New Palette Definition..."
                    IsEnabled="{Binding ProjectTree.HasProject}" />
            </MenuItem>
            -->

            <!--
        <MenuItem Header="_Plugins" />
            -->
        </Menu>

        <ui:CommandBar
            Grid.Column="1"
            Margin="0,0,12,0"
            Background="Transparent"
            DefaultLabelPosition="Right">
            <ui:AppBarButton Click="{s:Action ToggleTheme}" Label="Toggle Theme">
                <ui:AppBarButton.Icon>
                    <ui:FontIcon Margin="0,-2,0,0" Glyph="&#xE771;" />
                </ui:AppBarButton.Icon>
            </ui:AppBarButton>
        </ui:CommandBar>
    </Grid>
</UserControl>
